

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hyperliquid Point Value</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
        :root {
            --bs-primary: rgb(80, 210, 193);
        }
        body {
            background-color: #102624;
            color: #000;
        }
        .table {
            color: #fff;
        }
        .table thead th {
            color: var(--bs-primary);
        }
        .accent-color {
            color: var(--bs-primary);
        }
        .emoji {
            margin-right: 5px;
            font-size: 14px;
        }
        .price-cell {
            text-align: right;
        }
        a {
            color: var(--bs-primary);    
            text-decoration: underline;
        }
        h1 {
            font-family: 'OurFont', sans-serif;
            color: #000;
        } 
        .full-width-table{
          width: 100%;
        }
        .container {
            max-width: 600px;
        }
  </style>
</head>
<body>
  <div class="container">
    <div class="row justify-content-center">
      <div class="mx-auto my-5">
        <table class="table table-dark full-width-table">
          <thead>
            <tr>
              <th>
                <div class="text-center">
                  <p class="fs-5">Hyperliquid Point Value</p>
                </div>
              </th>
            </tr>
            <tr>
              <td>
                These prices are for reference only. Listing is not constitute endorsement or financial advice.
                 This was put together by <a href="https://twitter.com/stalequant" target="_blank">stalequant</a> who is not affiliated with <a href="https://hyperliquid.xyz" target="_blank">hyperliquid.xyz</a>.
                  Comps are the FDV or market cap of other exchanges, scaled by their size relative to Hyperliqiud. EG: If HL has ten times as much volume as Drift, we assume that HL's FDV will be ten times as big. Data for comparables from <a href="coingecko.com/">CoinGecko</a> and <a href="https://defillama.com/derivatives">Defillama</a>, all data fetched live.
              </td>
            </tr>
          </thead>
        </table>

        <table class="table table-dark full-width-table " id="markets_fdv">
          <thead>
            <tr>
              <th colspan="2" >Fully diluted valuation</th>
            </tr>
          </thead>
          <tbody>
          <tr>
            <th >Source</th>
            <th class="price-cell">FDV</th>
          </tr>
            <!-- Rows will be added here by JavaScript -->
          </tbody>



            <tr>
              <td>
                <span class="emoji">ðŸŽ¯</span><a href="https://x.com/defi_monk/status/1856019835316002998" target="_blank">MONK @ Messari (2027 prediction)</a>
              </td> 
              <td class="price-cell">$3.00-34.00b</td>
            </tr>
          
        </table>


        <table class="table table-dark full-width-table " id="point_markets">
          <thead>
            <tr>
              <th colspan="3">Points</th>
            </tr>
          </thead>
          <tbody>
              <tr>
                <th >Source</th>
                <th  class="price-cell">Price</th>
              </tr>
      </tbody>
            <tr>
              <td>
                <span class="emoji">ðŸŸ¡</span><a href="https://app.aevo.xyz/perpetual/hype" target="_blank">AEVO (inferred from FDV)</a>
              </td> 
              <td id="aevoI" class="price-cell">Loading...</td>
            </tr>
            <tr>
              <td>
                <span class="emoji">ðŸ”´</span><a href="https://www.gate.io/pre-market/HYPE" target="_blank">Gate.io (inferred from FDV)</a>
              </td> 
              <td id="gateI" class="price-cell">Loading...</td>
            </tr>
            <tr>
              <td>
                <span class="emoji">ðŸ§®</span><a href="https://www.investopedia.com/articles/investing/080913/equity-valuation-comparables-approach.asp" target="_blank">Comps (inferred from FDV)</a>
              </td> 
              <td id="compsI" class="price-cell">Loading...</td>
            </tr>
            <tr>
              <td colspan="3" style="padding-left: 20px;" class="form-range">â†’ assuming <input type="range" id="mySlider" min="0" max="51" value="20" oninput="update_inferred_values()"> <span id="sliderValue">20%</span> of FDV given to points</td>
            </tr>

            <tr>
              <td>
                <span class="emoji">ðŸŽ¯</span><a href="https://x.com/stevenyuntcap/status/1825928172065665310?t=4pWlevNQPZzZ50PO4ciYfA" target="_blank">steven.hl (prediction)</a>
              </td> 
              <td class="price-cell">$10.00-15.00</td>
            </tr>
            <tr>
              <td>
                <span class="emoji">ðŸŽ¯</span><a href="https://x.com/defi_monk/status/1854925228096287213/photo/1" target="_blank">Messari (prediction)</a>
              </td> 
              <td class="price-cell">$9.78-27.40</td>
            </tr>
            <tr>
              <td>
                <span class="emoji">ðŸŽ¯</span><a href="https://x.com/0xPasteke/status/1855727449444692117" target="_blank">Pasteke.hl (prediction)</a>
              </td> 
              <td class="price-cell">$9.00-46.00</td>
            </tr>


            <tr>
              <td>
                <span class="emoji">ðŸŒš</span><a href="https://twitter.com/crypto_adair" target="_blank">adair (moon math)</a>
              </td> 
              <td class="price-cell">$799.00-800.00</td>
            </tr>
            <tr>
              <td>
                <span class="emoji">ðŸŒš</span><a href="https://www.onchainbinance.com/points" target="_blank">onchainbinance (moon math)</a>
              </td> 
              <td class="price-cell">$0.00-844.00</td>
            </tr>
            <tr>
              <td>
                <span class="emoji">ðŸŒš</span><a href="https://twitter.com/GreenGeorgeHL/status/1823398193373032866/photo/1" target="_blank">GreenGeorgeHL (moon math)</a>
              </td> 
              <td class="price-cell">$30.00-86.00</td>
            </tr>
            <tr>
              <td>
                <span class="emoji">ðŸ’²</span><a href="https://twitter.com/wsbmod" target="_blank">wsbmod (OTC buyer)</a>
              </td> 
              <td class="price-cell">Negotiated</td>
            </tr>
            <tr>
              <td>
                <span class="emoji">ðŸ’²</span><a href="https://twitter.com/ExitLiqCapital" target="_blank">otcnick (OTC buyer)</a>
              </td> 
              <td class="price-cell">Negotiated</td>
            </tr>
          </tbody>
        </table>


    <table class="table table-dark full-width-table "  id="comparables_fdv" >
          <thead>
            <tr>
              <th colspan="3">Fully diluted valuation <a href="https://www.investopedia.com/articles/investing/080913/equity-valuation-comparables-approach.asp" target="_blank">comps</a></th>
            </tr>
          </thead>
        <tbody>
            <tr>
                <th>Comparable</th>
                <th class="price-cell">TVL-implied FDV</th>
                <th class="price-cell">ADV-implied FDV (7D)</th>
            </tr>
            <!-- Rows will be added here by JavaScript -->
        </tbody>
    </table>

    <table class="table table-dark full-width-table"  id="comparables_mc" >
          <thead>
            <tr>
              <th colspan="5">Market cap <a href="https://www.investopedia.com/articles/investing/080913/equity-valuation-comparables-approach.asp" target="_blank">comps</a></th>
            </tr>
          </thead>
        <tbody>
            <tr>
                <th>Comparable</th>
                <th class="price-cell">TVL-implied MC</th>
                <th class="price-cell">ADV-implied MC (7D)</th>
            </tr>
            <!-- Rows will be added here by JavaScript -->
        </tbody>
    </table>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script> 
  <script>

        async function getWithCORS(url_to_get) {
                const CORSurl = 'https://corsproxy.io/?' + encodeURIComponent(url_to_get);
                const response = await fetch(CORSurl);
                const data = await response.json();
                return data
        }
         

        async function fetchBubblyPriceFallback() {
            try {
                const bubblyURL = 'https://api.bubbly.finance/data/v1/42161/0x3b89D63Eaac5df9956A053f200aec2c4a309FcE6/liquidity'
                const data = await getWithCORS(bubblyURL);
                const balancedRange = data.data.tickRangeList.find(range => range.range === "Balanced");
                if (balancedRange) {

                    const lowerPrice = parseFloat(balancedRange.lowerPrice) * 1e12;
                    const upperPrice = parseFloat(balancedRange.upperPrice) * 1e12;
                    return `$${lowerPrice.toFixed(2)}-${upperPrice.toFixed(2)}`;
                } else {
                    throw new Error('Balanced range not found');
                }
                    
            } catch (error) {
                console.error('Error fetching Bubbly fallback data:', error);
                document.getElementById('bubbly').textContent = 'Failed';
            }
        }
        
        
        async function fetchBubblyPrice() { 
            try {
                const bubblyURL = 'https://api.bubbly.finance/data/v1/42161/price?address=0x807125cD6599d1f7CA5529dB78951A2828E2A948'
                const data = await getWithCORS(bubblyURL);
                const price = parseFloat(data.data.usdPrice);
                
                if (price < 0.1) {
                    console.log('Bubbly price is less than $0.1, triggering fallback');
                    throw new Error('Balanced range not found');

                } else {
                    return `$${price.toFixed(2)}`;
                }
                    
            } catch (error) {
                console.error('Error fetching Bubbly price data:', error);
                return await fetchBubblyPriceFallback();
            }
        
        }
        
        async function populateBubbly() {
            const printName = '<span class="emoji">ðŸŸ¡</span><a href="https://app.bubbly.finance/swap" target="_blank">bubbly.finance (market)</a>'
            const target = document.getElementById('point_markets').getElementsByTagName('tbody')[0];
            try {               
                const value = [await fetchBubblyPrice()];
                addRow( target, printName, value , 15);
            } catch (error) {
                console.error('Error fetching data:', error); 
                addRow( target, printName, ['Error'], 15);
            }
        }
        
        async function fetchWhalesPrice() { 
            const dataBids = await getWithCORS('https://api.whales.market/v2/offers?symbol=Hyperliquid&status=open&type=buy&take=2');
            const bestBid = Math.max(...dataBids.data.list.map(item => item.offer_price_usd)).toFixed(2);
                
            const dataAsks = await getWithCORS('https://api.whales.market/v2/offers?symbol=Hyperliquid&status=open&type=sell&take=2');
            const bestAsk = Math.min(...dataAsks.data.list.map(item => item.offer_price_usd)).toFixed(2);
    
            return `$${bestBid}-${bestAsk}`;
        }
        
        async function populateWhales() {
            const printName = '<span class="emoji">ðŸ”´</span><a href="https://pro.whales.market/points/Arbitrum/Hyperliquid" target="_blank">whales.market (market)</a>'
            const target = document.getElementById('point_markets').getElementsByTagName('tbody')[0];
            try {               
                const value = [await fetchWhalesPrice()];
                addRow( target, printName, value , 15);
            } catch (error) {
                console.error('Error fetching data:', error); 
                addRow( target, printName, ['Error'], 15);
            }
        }
        async function fetchCachedHfunPrice() { 
                const url = 'https://stalequant.github.io/stale_prices.json?Math.random()';

                const response = await fetch(url);
                const data = await response.json();
        
                value = `${data['date']} ->  $${data['hf'].toFixed(2)}`;
                return value;
        }
        
        async function populateHfun() {
            const printName = '<span class="emoji">ðŸŸ¢</span><a href="https://app.hypurr.fun/launch/262" target="_blank">Hypurrfun (market)</a>';
            const target = document.getElementById('point_markets').getElementsByTagName('tbody')[0];

            try {      
                const value = [await fetchCachedHfunPrice()];
      
                addRow( target, printName, [value], 15) ;
                
            } catch (error) {
                console.error('Error fetching data:', error); 
                addRow( target, printName, ['Error'], 15); 
            }
        }
        


        let gateBid = 0;
        let gateAsk = 0;         

        let aevoBid = 0;
        let aevoAsk = 0;     
          
        let compsBid = 0;
        let compsAsk = 0;         
 

        // Function to update the inferred value
        function update_inferred_values() {
                updatePointFDVBasedOnSliderAndValues();
        }

        // Initialize the calculated value on page load
        window.onload = function() {
            update_inferred_values(document.getElementById('mySlider').value);
        };


        async function fetchGatePrice() { 
            const AsksData = await getWithCORS('https://www.gate.io/apiw/v2/pre_market/market_orders?page=1&limit=50&currency=HYPE&side=sell&status=no_transaction');
            gateAsk = Number(AsksData['data']['list'][0]['price'])*100;

            const BidsData = await getWithCORS('https://www.gate.io/apiw/v2/pre_market/market_orders?page=1&limit=50&currency=HYPE&side=buy&status=no_transaction');
            gateBid = Number(BidsData['data']['list'][0]['price'])*100;

            return `$${gateBid.toFixed(2)}-${gateAsk.toFixed(2)}b`;
        }
            
        async function populateGate() {
            const printName = '<span class="emoji">ðŸŸ¡</span><a href="https://www.gate.io/pre-market/HYPE" target="_blank">Gate.io (market)</a>';
            const target = document.getElementById('markets_fdv').getElementsByTagName('tbody')[0];

            try {      
                const value =  await fetchGatePrice();
                addRow( target, printName, [value], 15) ;

                updatePointFDVBasedOnSliderAndValues()
            } catch (error) {
                addRow( target, printName, ['Error'], 15); 
                document.getElementById('gateI').textContent = 'Failed';
            }
        }

        async function fetchAevoPrice() { 
            const url = 'https://api.codetabs.com/v1/proxy/?quest=https://api.aevo.xyz/orderbook?instrument_name=HYPE-PERP';
        
            const response = await fetch(url);
            const parsedData = await response.json();
            
            aevoBid = Number(parsedData['bids'][0][0]);
            aevoAsk = Number(parsedData['asks'][0][0]);

            return `$${aevoBid.toFixed(2)}-${aevoAsk.toFixed(2)}b`;
        }
        
        async function populateAevo() {
            const printName = '<span class="emoji">ðŸŸ¢</span><a href="https://app.aevo.xyz/perpetual/hype" target="_blank">AEVO (market)</a>';
            const target = document.getElementById('markets_fdv').getElementsByTagName('tbody')[0];

            try {      
                const value =  await fetchAevoPrice();
                addRow( target, printName, [value], 15) ;

                updatePointFDVBasedOnSliderAndValues()
            } catch (error) {
                addRow( target, printName, ['Error'], 15); 
                document.getElementById('aevoI').textContent = 'Failed';
            }
        }
                
                
        function updatePointFDVBasedOnSliderAndValues(){       
            let sliderValue = document.getElementById('mySlider').value;
            document.getElementById('sliderValue').textContent = sliderValue + "%";

            if ((gateBid > 0) &  (gateAsk > 0)) { 
                try {
                    document.getElementById('gateI').textContent = `$${(gateBid*1000/51*sliderValue/100).toFixed(2)}-${(gateAsk*1000/51*sliderValue/100).toFixed(2)}`;
                } catch (error) {
                    document.getElementById('gateI').textContent = 'Failed';
                }        
            }
                    
            if ((compsBid > 0) &  (compsAsk > 0)) { 
                try {
                    document.getElementById('compsI').textContent = `$${(compsBid*1000/51*sliderValue/100).toFixed(2)}-${(compsAsk*1000/51*sliderValue/100).toFixed(2)}`;
                } catch (error) {
                    document.getElementById('compsI').textContent = 'Failed';
                }        
            }
                    
            if ((aevoBid > 0) &  (aevoAsk > 0)) { 
                try {
                    document.getElementById('aevoI').textContent = `$${(aevoBid*1000/51*sliderValue/100).toFixed(2)}-${(aevoAsk*1000/51*sliderValue/100).toFixed(2)}`;
                } catch (error) {
                    document.getElementById('aevoI').textContent = 'Failed';
                }        
            }
        }

        populateBubbly();
        populateWhales();
        populateHfun();
        populateAevo();
        populateGate();


        async function populateComps() {
            const urlGecko = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=dydx-chain%2Caevo-exchange%2Cdrift-protocol%2Cgmx%2Craydium%2Cuniswap';
            const urlLlama = 'https://api.llama.fi/protocols';
            const urlLlama2 = 'https://api.llama.fi/overview/derivatives?excludeTotalDataChartBreakdown=true&excludeTotalDataChart=true';
            const urlLlama3 = 'https://api.llama.fi/overview/dexs/All?excludeTotalDataChart=true&excludeTotalDataChartBreakdown=false';

            const [geckoData, llamaData, llamaData2, llamaData3] = await Promise.all([
                fetch(urlGecko).then(response => response.json()),
                fetch(urlLlama).then(response => response.json()),
                fetch(urlLlama2).then(response => response.json()),
                fetch(urlLlama3).then(response => response.json())
            ]);

            const llamaDict = Object.fromEntries(llamaData.map(a => [a.name, a]));
            const llama2Dict = Object.fromEntries(llamaData2.protocols.map(a => [a.name, a]));
            const llama3Dict = Object.fromEntries(llamaData3.protocols.map(a => [a.name, a]));
            const geckoDict = Object.fromEntries(geckoData.map(a => [a.id, a]));

            const baseName = ['Hyperliquid Perp'];
            const nameMap = [
                ['Aevo', ['Aevo Perps', 'Aevo Options'], 'aevo-exchange'],
                ['Drift', ['Drift Trade', 'Drift AMM'], 'drift-protocol'],
                ['dYdX', ['dYdX V4'], 'dydx-chain'],
                ['GMX', ['GMX V2 Perps'], 'gmx'],
                ['Raydium', ['Raydium'], 'raydium'],
                ['Uniswap', ['Uniswap V3', 'Uniswap V2', 'Uniswap V1', 'Uniswap Labs'], 'uniswap']
            ];

            function getExchMetrics(llamaNames) {
                const output = { tvl: 0, v1d: 0, v7d: 0, v30d: 0 };
                for (const llamaName of llamaNames) {
                    const llama = llamaDict[llamaName];
                    const llama2 = llama2Dict[llamaName];
                    const llama3 = llama3Dict[llamaName];
                    
                    // Accumulate TVL from llamaDict
                    if (llama && llama.tvl) {
                        output.tvl += parseFloat(llama.tvl) || 0;
                    }

                    // Accumulate volume metrics from llama2Dict and llama3Dict
                    if (llama2) {
                        output.v1d += parseFloat(llama2.total24h) || 0;
                        output.v7d += (parseFloat(llama2.total7d) || 0) / 7;
                        output.v30d += (parseFloat(llama2.total30d) || 0) / 30;
                    }
                    if (llama3) {
                        output.v1d += parseFloat(llama3.total24h) || 0;
                        output.v7d += (parseFloat(llama3.total7d) || 0) / 7;
                        output.v30d += (parseFloat(llama3.total30d) || 0) / 30;
                    }
                }
                return output;
            }

            function normMetrics(base, comp, mult) {
                const allMetrics = {};
                for (const metric in base) {
                    allMetrics[metric] = (base[metric] / comp[metric]) * mult;
                }
                return allMetrics;
            }

            const hlMetrics = getExchMetrics(baseName);
            
            let allComps = []

            for (const [printName, llamaNames, geckoName] of nameMap) {
                const compMetrics = getExchMetrics(llamaNames);

                metrics = normMetrics(hlMetrics, compMetrics, geckoDict[geckoName].fully_diluted_valuation / 1e9)
                target = document.getElementById('comparables_fdv').getElementsByTagName('tbody')[0];
                addRow( target, `<span class="emoji">ðŸ§®</span>${printName}`, [Number(metrics['tvl']), Number(metrics['v7d'])], 5)
                allComps.push(Number(metrics['tvl']))
                allComps.push(Number(metrics['v7d']))
                
                metrics = normMetrics(hlMetrics, compMetrics, geckoDict[geckoName].market_cap / 1e9)
                target = document.getElementById('comparables_mc').getElementsByTagName('tbody')[0];
                addRow( target, `<span class="emoji">ðŸ§®</span>${printName}`, [Number(metrics['tvl']), Number(metrics['v7d'])], 5)

            }
                    
            allComps.sort((a, b) => a - b);
            
            // Calculate the index for the 25th percentile
            compsBid = allComps[Math.floor(0.25 * (allComps.length - 1))]
            compsAsk = allComps[Math.ceil(0.75 * (allComps.length - 1))]
        
            target = document.getElementById('comparables_fdv').getElementsByTagName('tbody')[0];
            addRow( target, `<span class="emoji">ðŸ§®</span>Overall 25th percentile`, ['',compsBid], 15) ;
            addRow( target, `<span class="emoji">ðŸ§®</span>Overall 75th percentile`, ['',compsAsk], 15) ;


            target = document.getElementById('markets_fdv').getElementsByTagName('tbody')[0];
            value =  `$${compsBid.toFixed(2)}-${compsAsk.toFixed(2)}b`;
            addRow( target, `<span class="emoji">ðŸ§®</span><a href="https://www.investopedia.com/articles/investing/080913/equity-valuation-comparables-approach.asp" target="_blank">Comps (calculated below)</a>`, [value], 15) ;
            
            updatePointFDVBasedOnSliderAndValues()

        }
        
        function addRow(table, name, prices, cutoff=null){
            const row = document.createElement('tr');

            const nameCell = document.createElement('td');
            nameCell.innerHTML  = name;
            row.appendChild(nameCell);
            
            for (const price of prices) {         
                const cell = document.createElement('td');
                cell.classList.add("price-cell");
                if (price == null){
                      cell.textContent = 'N/A';
                      cell.style.backgroundColor = '#f0f0f0'; 

                } else if (typeof price === 'number' ) {
                      cell.textContent = `$${price.toFixed(2)}b`;
                      if (cutoff != null && price > cutoff) {
                         cell.style.backgroundColor =  '#003e00';
                       } 
                       
                } else {
                    cell.textContent = price;  
                                    
                }      
                row.appendChild(cell);
        
            }
            table.appendChild(row);
        }

        populateComps();
    </script>
</body>
</html>
